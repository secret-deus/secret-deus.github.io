---
title: etcdctl命令整理
date: 2025-02-13 10:09:00 +0800
categories: [kubernetes]
tags: [知识梳理] 
---

`etcdctl` 是 `etcd` 的命令行客户端工具，用于与 `etcd` 集群进行交互。下面是 `etcdctl` 的一些常用选项和命令，帮助你进行数据存取和集群管理等操作。

### 常用选项

在执行任何 `etcdctl` 命令时，你通常需要指定以下选项来配置连接参数：

- `--endpoints=[]`：指定 `etcd` 集群的一个或多个端点地址，通常是 `http://ip:port` 格式。
- `--cacert=""`：指定根证书文件路径，用于 TLS 连接。
- `--cert=""`：指定客户端证书文件路径，用于 TLS 连接。
- `--key=""`：指定客户端私钥文件路径，用于 TLS 连接。
- `--user=""`：指定用户名和密码，格式为 `username:password`，用于身份验证。
- `--dial-timeout=""`：指定建立连接的超时时长。
- `--command-timeout=""`：指定命令执行的超时时长。

### 常用命令

#### 数据操作命令

- `put <key> <value>`：设置指定键的值。
  ```bash
  etcdctl put mykey myvalue
  ```

- `get <key>`：获取指定键的值，可以使用 `--prefix` 来获取具有相同前缀的键。
  ```bash
  etcdctl get mykey
  etcdctl get my --prefix
  ```

- `del <key>`：删除指定键。
  ```bash
  etcdctl del mykey
  ```

#### 集群操作命令

- `member list`：列出集群中所有成员。
  ```bash
  etcdctl member list
  ```

- `endpoint status`：获取指定端点的状态信息。
  ```bash
  etcdctl endpoint status
  ```

- `endpoint health`：检查集群中一个或多个端点的健康状态。
  ```bash
  etcdctl endpoint health
  ```

#### 维护相关命令

- `snapshot save <filename>`：创建集群的快照备份。
  ```bash
  etcdctl snapshot save backup.db
  ```

- `snapshot status <filename>`：查看快照状态。
  ```bash
  etcdctl snapshot status backup.db
  ```

- `defrag`：整理 `etcd` 数据库以释放空间。
  ```bash
  etcdctl defrag
  ```

#### 其他命令

- `version`：显示 `etcdctl` 工具和 `etcd` 服务器版本。
  ```bash
  etcdctl version
  ```

这些命令和选项覆盖了 `etcdctl` 的大部分基本功能，但 `etcdctl` 是一个非常强大和灵活的工具，拥有更多的高级选项和命令。要获取更多详细信息，您可以使用该工具的帮助命令：

```bash
etcdctl --help
```